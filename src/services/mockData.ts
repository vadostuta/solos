import {
  Platform,
  PayoutStatus,
  type Payout,
  type Expense,
  type User
} from '@/types'
import shopifyCsv from '@/data/shopify_payments_table.csv?raw'

// Mock user
export const mockUser: User = {
  name: 'Andrzej',
  avatarUrl:
    'https://pacificnwreviews.wordpress.com/wp-content/uploads/2013/04/ryan-gosling-place-beyond-the-pines.jpg',
  email: 'andrzej@example.com'
}

// Parse Amazon CSV data and convert to Payouts
const parseAmazonOrders = (): Payout[] => {
  const csvData = `amazon_24746291521,114-8371645-4419464,Order,2025-10-30,,332.58,-27.22,261.16
amazon_24746291521,114-9116493-8452212,Order,2025-10-29,,128.17,-13.21,99.67
amazon_24746291521,111-2492492-2368203,Order,2025-10-29,,720.9,-38.21,572.7
amazon_24746291521,113-7770286-9420258,Order,2025-10-29,,187.66,-17.6,149.6
amazon_24746291521,111-6549721-4591457,Order,2025-10-29,,576.72,-34.17,458.16
amazon_24746291521,114-8631167-0539412,Order,2025-10-28,,224.69,-21.0,178.49
amazon_24746291521,114-3124257-3397019,Order,2025-10-28,,234.29,-22.0,168.92
amazon_24746291521,112-6082282-2333800,Order,2025-10-28,,237.04,-22.0,168.92
amazon_24746291521,112-1776731-9181848,Order,2025-10-27,,388.48,-28.79,305.74
amazon_24746291521,111-0077670-0280233,Order,2025-10-27,,167.45,-15.75,130.58
amazon_24746291521,114-6196745-4838642,Order,2025-10-25,,720.9,-38.21,572.7
amazon_24746291521,111-2899732-4253014,Order,2025-10-25,,720.9,-38.21,572.7
amazon_24746291521,113-5341196-7505022,Refund,2025-10-24,,0.0,0.0,-162.45
amazon_24746291521,114-4365649-1689865,Order,2025-10-23,,151.41,-14.95,120.84
amazon_24746291521,111-6986201-1950603,Order,2025-10-21,,376.26,-28.65,301.72
amazon_24746291521,111-6765691-2549865,Order,2025-10-21,,194.24,-17.98,152.87
amazon_24746291521,112-1220193-4329842,Order,2025-10-20,,243.79,-23.0,195.49
amazon_24746291521,112-9271285-9698660,Order,2025-10-20,,211.98,-20.0,169.98
amazon_24746291521,111-1447126-0553061,Order,2025-10-20,,141.63,-14.31,113.04
amazon_24746291521,111-1172774-4712231,Refund,2025-10-20,,0.0,0.0,-168.33
amazon_24746291521,112-8631378-0875425,Order,2025-10-19,,240.56,-22.0,168.92
amazon_24746291521,113-8783758-5482602,Order,2025-10-19,,241.44,-22.0,168.92
amazon_24746291521,113-7988588-8341057,Order,2025-10-17,,720.9,-38.21,572.7
amazon_24746291521,113-8117875-3015454,Order,2025-10-17,,273.26,-26.2,232.28
amazon_24746291521,111-7006447-5918624,Order,2025-10-17,,164.37,-15.75,130.58
amazon_24646454811,112-8171640-4813005,Order,2025-10-15,2025-10-18 06:01:40 UTC,191.53,-17.9,152.15
amazon_24646454811,113-8783758-5482602,Order,2025-10-15,2025-10-18 06:01:40 UTC,482.88,-31.2,337.84
amazon_24646454811,111-0707639-2892221,Order,2025-10-14,2025-10-18 06:01:40 UTC,227.31,-21.0,178.49
amazon_24646454811,113-3857224-9524219,Order,2025-10-14,2025-10-18 06:01:40 UTC,300.12,-26.47,239.86
amazon_24646454811,112-2527682-8689806,Order,2025-10-13,2025-10-18 06:01:40 UTC,149.27,-14.56,116.14
amazon_24646454811,113-4427459-3217063,Order,2025-10-13,2025-10-18 06:01:40 UTC,234.29,-22.0,186.99
amazon_24646454811,113-8452539-9806645,Order,2025-10-13,2025-10-18 06:01:40 UTC,224.69,-21.0,178.49
amazon_24646454811,113-1128270-7657847,Order,2025-10-13,2025-10-18 06:01:40 UTC,197.84,-17.98,152.87
amazon_24646454811,111-9597306-7283428,Refund,2025-10-13,2025-10-18 06:01:40 UTC,0.0,0.0,-123.81
amazon_24646454811,111-3281571-4766668,Order,2025-10-13,2025-10-18 06:01:40 UTC,229.41,-21.0,178.49
amazon_24646454811,111-6029529-3733824,Order,2025-10-12,2025-10-18 06:01:40 UTC,470.78,-31.2,339.92
amazon_24646454811,111-3286312-0827422,Order,2025-10-11,2025-10-18 06:01:40 UTC,239.24,-22.0,169.96
amazon_24646454811,111-1430556-1200225,Order,2025-10-11,2025-10-18 06:01:40 UTC,232.09,-22.0,169.96
amazon_24646454811,111-9376411-7905061,Order,2025-10-09,2025-10-18 06:01:40 UTC,382.16,-28.74,304.3
amazon_24646454811,111-8270450-3966621,Order,2025-10-09,2025-10-18 06:01:40 UTC,191.54,-17.98,152.87
amazon_24646454811,114-3376402-7058653,Order,2025-10-08,2025-10-18 06:01:40 UTC,240.01,-22.0,169.96
amazon_24646454811,112-3744980-2341001,Order,2025-10-08,2025-10-18 06:01:40 UTC,213.98,-20.0,169.98
amazon_24646454811,112-2611814-0898648,Refund,2025-10-08,2025-10-18 06:01:40 UTC,0.0,0.0,-157.15
amazon_24646454811,111-5562252-1485031,Order,2025-10-08,2025-10-18 06:01:40 UTC,192.44,-17.98,152.87
amazon_24646454811,114-1529308-3127450,Refund,2025-10-08,2025-10-18 06:01:40 UTC,0.0,0.0,-160.09
amazon_24646454811,111-7272285-4797042,Order,2025-10-08,2025-10-18 06:01:40 UTC,194.69,-17.98,152.87
amazon_24646454811,111-7003473-3797043,Refund,2025-10-07,2025-10-18 06:01:40 UTC,0.0,0.0,-244.86
amazon_24646454811,111-6922746-4635443,Order,2025-10-07,2025-10-18 06:01:40 UTC,150.98,-14.88,119.93
amazon_24646454811,114-9676626-9479422,Order,2025-10-06,2025-10-18 06:01:40 UTC,224.69,-21.0,178.49
amazon_24646454811,114-6179101-7334612,Order,2025-10-06,2025-10-18 06:01:40 UTC,485.08,-31.2,339.92
amazon_24646454811,111-1172774-4712231,Order,2025-10-06,2025-10-18 06:01:40 UTC,208.96,-19.22,163.33
amazon_24646454811,114-1613430-2227404,Order,2025-10-05,2025-10-18 06:01:40 UTC,192.44,-17.98,152.87
amazon_24646454811,111-8914527-0560211,Order,2025-10-05,2025-10-18 06:01:40 UTC,720.9,-38.21,572.7
amazon_24646454811,111-7652815-9639425,Order,2025-10-05,2025-10-18 06:01:40 UTC,720.9,-38.21,572.7
amazon_24646454811,113-9102415-4089804,Order,2025-10-05,2025-10-18 06:01:40 UTC,195.14,-17.98,152.87
amazon_24646454811,112-6065566-7021034,Order,2025-10-03,2025-10-18 06:01:40 UTC,148.86,-14.88,119.93
amazon_24646454811,113-0561927-8835423,Order,2025-10-03,2025-10-18 06:01:40 UTC,236.49,-22.0,169.96
amazon_24646454811,114-8722740-1345806,Order,2025-10-03,2025-10-18 06:01:40 UTC,215.58,-20.0,169.98
amazon_24646454811,113-9254016-8256229,Order,2025-10-03,2025-10-18 06:01:40 UTC,192.43,-17.9,152.15
amazon_24646454811,111-9373404-0359439,Order,2025-10-03,2025-10-18 06:01:40 UTC,191.77,-17.98,152.87
amazon_24539101731,112-9280046-6921833,Order,2025-10-01,2025-10-04 06:01:40 UTC,240.56,-22.0,169.96
amazon_24539101731,113-2670951-7139431,Order,2025-10-01,2025-10-04 06:01:40 UTC,699.57,-37.8,509.88
amazon_24539101731,114-7801836-6570633,Order,2025-09-30,2025-10-04 06:01:40 UTC,973.45,-44.98,764.35
amazon_24539101731,113-2636248-3569069,Order,2025-09-30,2025-10-04 06:01:40 UTC,184.0,-16.9,143.65
amazon_24539101731,112-6574680-3489000,Order,2025-09-29,2025-10-04 06:01:40 UTC,191.99,-17.98,152.87
amazon_24539101731,111-3817072-2034640,Order,2025-09-29,2025-10-04 06:01:40 UTC,470.78,-31.2,339.92
amazon_24539101731,113-8576738-1513855,Refund,2025-09-28,2025-10-04 06:01:40 UTC,0.0,0.0,-183.49
amazon_24539101731,114-6265435-6938661,Order,2025-09-28,2025-10-04 06:01:40 UTC,194.24,-17.98,152.87
amazon_24539101731,112-5234945-9447461,Order,2025-09-27,2025-10-04 06:01:40 UTC,223.9,-21.0,178.49
amazon_24539101731,114-6087028-8398656,Order,2025-09-26,2025-10-04 06:01:40 UTC,205.2,-18.96,161.13
amazon_24539101731,111-0713681-0058624,Refund,2025-09-25,2025-10-04 06:01:40 UTC,0.0,0.0,-152.55
amazon_24539101731,112-1899782-4656222,Refund,2025-09-25,2025-10-04 06:01:40 UTC,0.0,0.0,-231.08
amazon_24539101731,114-3965177-0925033,Refund,2025-09-25,2025-10-04 06:01:40 UTC,0.0,0.0,-120.24
amazon_24539101731,112-0801913-1460251,Order,2025-09-22,2025-10-04 06:01:40 UTC,192.44,-17.98,152.87
amazon_24539101731,111-5119697-5019432,Order,2025-09-22,2025-10-04 06:01:40 UTC,189.74,-17.9,152.15
amazon_24539101731,112-4484075-1510636,Order,2025-09-22,2025-10-04 06:01:40 UTC,235.39,-22.0,169.96
amazon_24539101731,113-6001328-1325014,Order,2025-09-22,2025-10-04 06:01:40 UTC,154.79,-15.08,122.39
amazon_24539101731,112-7788217-6357857,Order,2025-09-22,2025-10-04 06:01:40 UTC,152.63,-15.08,122.39
amazon_24539101731,113-8333470-1757816,Order,2025-09-22,2025-10-04 06:01:40 UTC,384.88,-28.79,305.74
amazon_24539101731,114-0489656-2061858,Order,2025-09-22,2025-10-04 06:01:40 UTC,223.63,-20.9,177.65
amazon_24539101731,111-2689159-9627414,Order,2025-09-21,2025-10-04 06:01:40 UTC,466.38,-31.2,339.92
amazon_24539101731,114-5637861-2638650,Order,2025-09-20,2025-10-04 06:01:40 UTC,229.23,-22.0,169.96
amazon_24539101731,113-5341196-7505022,Order,2025-09-19,2025-10-04 06:01:40 UTC,204.22,-18.52,157.45
amazon_24439213131,114-1529308-3127450,Order,2025-09-17,2025-09-20 06:01:40 UTC,193.41,-18.25,155.09
amazon_24439213131,112-2611814-0898648,Order,2025-09-17,2025-09-20 06:01:40 UTC,191.08,-17.9,152.15
amazon_24439213131,111-9597306-7283428,Order,2025-09-17,2025-09-20 06:01:40 UTC,150.54,-14.85,119.59
amazon_24439213131,114-7535384-6956255,Order,2025-09-12,2025-09-20 06:01:40 UTC,195.17,-17.98,152.87
amazon_24439213131,113-8489404-3281051,Order,2025-09-11,2025-09-20 06:01:40 UTC,226.79,-21.0,178.49
amazon_24439213131,111-0713681-0058624,Order,2025-09-11,2025-09-20 06:01:40 UTC,185.74,-17.36,147.55
amazon_24439213131,111-8363794-6251442,Order,2025-09-11,2025-09-20 06:01:40 UTC,219.99,-22.0,186.99
amazon_24439213131,111-6041210-9301058,Order,2025-09-10,2025-09-20 06:01:40 UTC,238.14,-22.0,186.99
amazon_24439213131,114-4938372-1309839,Order,2025-09-10,2025-09-20 06:01:40 UTC,447.26,-30.54,355.3
amazon_24439213131,111-0185371-4114609,Order,2025-09-08,2025-09-20 06:01:40 UTC,147.06,-14.62,116.82
amazon_24439213131,113-8576738-1513855,Order,2025-09-08,2025-09-20 06:01:40 UTC,223.9,-21.0,178.49
amazon_24439213131,113-4642213-5505834,Order,2025-09-05,2025-09-20 06:01:40 UTC,389.38,-28.79,305.74
amazon_24331066851,114-0890964-8633841,Order,2025-09-03,2025-09-06 06:01:40 UTC,472.98,-31.2,339.92
amazon_24331066851,112-6209541-7753814,Order,2025-09-02,2025-09-06 06:01:40 UTC,207.04,-19.22,163.33
amazon_24331066851,112-0927878-2139415,Order,2025-09-01,2025-09-06 06:01:40 UTC,151.2,-14.95,120.84
amazon_20575652231,111-9293321-5077834,Order,2025-08-31,2025-09-15 14:56:41 UTC,564.4,-34.93,479.72
amazon_24331066851,114-2808225-4485026,Order,2025-08-30,2025-09-06 06:01:40 UTC,238.69,-22.0,169.96
amazon_24331066851,111-7003473-3797043,Order,2025-08-29,2025-09-06 06:01:40 UTC,305.48,-26.47,239.86
amazon_24331066851,114-8786398-2257009,Order,2025-08-29,2025-09-06 06:01:40 UTC,194.69,-17.98,152.87
amazon_24331066851,112-9019277-1244242,Order,2025-08-29,2025-09-06 06:01:40 UTC,164.52,-16.52,139.84
amazon_24331066851,112-1899782-4656222,Order,2025-08-28,2025-09-06 06:01:40 UTC,290.58,-25.98,226.08
amazon_24331066851,112-4104127-3255445,Order,2025-08-28,2025-09-06 06:01:40 UTC,192.44,-17.98,152.87
amazon_24331066851,114-2446939-8073020,Order,2025-08-28,2025-09-06 06:01:40 UTC,143.96,-14.31,113.04
amazon_24331066851,112-8265686-8546626,Order,2025-08-28,2025-09-06 06:01:40 UTC,0.0,-13.0,0.0
amazon_24331066851,113-5203340-4797862,Order,2025-08-27,2025-09-06 06:01:40 UTC,241.44,-22.0,169.96
amazon_24331066851,111-9529379-9192217,Order,2025-08-27,2025-09-06 06:01:40 UTC,1165.95,-51.0,849.8
amazon_24331066851,112-5708831-8824252,Refund,2025-08-27,2025-09-06 06:01:40 UTC,0.0,0.0,-174.22
amazon_24331066851,114-2539977-9380234,Refund,2025-08-27,2025-09-06 06:01:40 UTC,0.0,0.0,-149.49
amazon_24331066851,114-2022164-2725832,Order,2025-08-26,2025-09-06 06:01:40 UTC,1190.7,-51.0,849.8
amazon_24331066851,114-5341172-5736208,Order,2025-08-26,2025-09-06 06:01:40 UTC,183.79,-16.9,143.65
amazon_24331066851,113-6346032-6734634,Order,2025-08-25,2025-09-06 06:01:40 UTC,216.2,-19.91,152.19
amazon_24331066851,113-1075234-0481025,Refund,2025-08-25,2025-09-06 06:01:40 UTC,0.0,0.0,-125.78
amazon_24331066851,112-3149756-4783435,Order,2025-08-25,2025-09-06 06:01:40 UTC,226.37,-21.0,178.49
amazon_24331066851,113-4874525-2433039,Order,2025-08-25,2025-09-06 06:01:40 UTC,0.0,-13.0,0.0
amazon_24331066851,114-2458145-6564206,Order,2025-08-24,2025-09-06 06:01:40 UTC,424.04,-29.94,304.38
amazon_24331066851,112-0173376-3104213,Refund,2025-08-24,2025-09-06 06:01:40 UTC,0.0,0.0,-191.15
amazon_24331066851,111-7163391-8612242,Order,2025-08-24,2025-09-06 06:01:40 UTC,288.53,-19.91,152.19
amazon_24331066851,113-8987187-2773068,Order,2025-08-23,2025-09-06 06:01:40 UTC,430.32,-29.94,304.38
amazon_24331066851,113-5159717-9743402,Order,2025-08-21,2025-09-06 06:01:40 UTC,435.98,-29.94,304.38
amazon_24331066851,111-8636142-3257813,Order,2025-08-21,2025-09-06 06:01:40 UTC,214.51,-19.91,152.19
amazon_24232682081,112-0143215-6563408,Order,2025-08-20,2025-08-23 06:01:40 UTC,446.22,-30.6,356.98
amazon_24232682081,112-5708831-8824252,Order,2025-08-20,2025-08-23 06:01:40 UTC,213.02,-19.91,152.19
amazon_24232682081,114-7766654-0691414,Order,2025-08-20,2025-08-23 06:01:40 UTC,27.63,-13.0,22.1
amazon_24232682081,113-8745222-2557050,Order,2025-08-20,2025-08-23 06:01:40 UTC,228.81,-21.0,178.49
amazon_24232682081,112-0593928-1695452,Order,2025-08-19,2025-08-23 06:01:40 UTC,214.51,-19.91,152.19
amazon_24232682081,114-3965177-0925033,Order,2025-08-19,2025-08-23 06:01:40 UTC,144.14,-14.56,116.14
amazon_24232682081,113-6053330-4875414,Order,2025-08-19,2025-08-23 06:01:40 UTC,223.9,-21.0,178.49
amazon_24232682081,113-6259105-6693826,Order,2025-08-19,2025-08-23 06:01:40 UTC,144.18,-14.43,114.54
amazon_24232682081,112-1237979-9011426,Order,2025-08-18,2025-08-23 06:01:40 UTC,165.91,-15.75,130.58
amazon_24232682081,112-8020361-8337821,Order,2025-08-18,2025-08-23 06:01:40 UTC,214.01,-19.91,169.22
amazon_24232682081,111-6609397-3363411,Order,2025-08-18,2025-08-23 06:01:40 UTC,211.02,-19.91,169.22
amazon_24232682081,113-8890786-1812249,Order,2025-08-16,2025-08-23 06:01:40 UTC,235.39,-22.0,186.99
amazon_24232682081,113-3633155-1348214,Order,2025-08-16,2025-08-23 06:01:40 UTC,235.39,-22.0,186.99
amazon_24232682081,112-8428019-1476219,Refund,2025-08-16,2025-08-23 06:01:40 UTC,0.0,0.0,-191.99
amazon_24232682081,113-0329021-6153818,Order,2025-08-16,2025-08-23 06:01:40 UTC,235.39,-22.0,186.99
amazon_24232682081,112-7780128-1301002,Order,2025-08-16,2025-08-23 06:01:40 UTC,769.76,-39.58,611.48
amazon_24232682081,113-4064165-7469015,Order,2025-08-16,2025-08-23 06:01:40 UTC,252.99,-13.0,-22.03
amazon_24232682081,112-4222128-4497044,Order,2025-08-15,2025-08-23 06:01:40 UTC,149.8,-14.59,116.44
amazon_24232682081,114-7360473-8783462,Order,2025-08-14,2025-08-23 06:01:40 UTC,184.01,-17.0,144.49
amazon_24232682081,111-5760008-3737835,Order,2025-08-14,2025-08-23 06:01:40 UTC,190.64,-17.98,152.87
amazon_24232682081,114-3226747-3213821,Order,2025-08-13,2025-08-23 06:01:40 UTC,238.14,-22.0,169.96
amazon_24232682081,113-1075234-0481025,Order,2025-08-11,2025-08-23 06:01:40 UTC,157.22,-15.01,121.49
amazon_24232682081,113-5020201-7435441,Order,2025-08-11,2025-08-23 06:01:40 UTC,235.39,-22.0,169.96
amazon_24232682081,112-6322505-7037043,Order,2025-08-11,2025-08-23 06:01:40 UTC,289.29,-13.0,-22.03
amazon_24232682081,114-5893168-4728235,Order,2025-08-11,2025-08-23 06:01:40 UTC,192.44,-17.98,152.87
amazon_24232682081,111-5751286-1008251,Order,2025-08-11,2025-08-23 06:01:40 UTC,165.93,-15.73,130.29
amazon_24232682081,114-8729992-2826608,Order,2025-08-11,2025-08-23 06:01:40 UTC,282.69,-13.0,-22.03
amazon_24232682081,112-4157314-5292222,Order,2025-08-09,2025-08-23 06:01:40 UTC,237.59,-22.0,169.96
amazon_24232682081,111-4845425-7429814,Refund,2025-08-08,2025-08-23 06:01:40 UTC,0.0,0.0,-117.03
amazon_24232682081,114-3901343-4389833,Refund,2025-08-08,2025-08-23 06:01:40 UTC,0.0,0.0,-191.99
amazon_24232682081,114-0565737-4285828,Order,2025-08-07,2025-08-23 06:01:40 UTC,190.64,-17.98,152.87
amazon_24232682081,112-2261981-8588217,Order,2025-08-07,2025-08-23 06:01:40 UTC,155.92,-14.88,119.93
amazon_24127217761,113-9742266-9599420,Order,2025-08-05,2025-08-09 06:01:39 UTC,471.88,-31.2,339.92
amazon_24127217761,113-9291507-2173853,Order,2025-08-05,2025-08-09 06:01:39 UTC,145.68,-14.56,116.14
amazon_24127217761,113-6055539-1459406,Order,2025-08-05,2025-08-09 06:01:39 UTC,237.59,-22.0,186.99
amazon_24127217761,111-7363860-5649016,Order,2025-08-04,2025-08-09 06:01:39 UTC,191.54,-17.98,152.87
amazon_24127217761,113-7452920-5753804,Order,2025-08-04,2025-08-09 06:01:39 UTC,185.09,-17.36,147.55
amazon_24127217761,113-0416070-0857031,Order,2025-08-04,2025-08-09 06:01:39 UTC,183.16,-17.0,144.49
amazon_24127217761,111-7862893-9806626,Order,2025-08-03,2025-08-09 06:01:39 UTC,233.19,-22.0,169.96
amazon_24127217761,114-8978582-4909016,Order,2025-08-02,2025-08-09 06:01:39 UTC,330.16,-27.34,264.76
amazon_24127217761,114-8650556-8405800,Order,2025-08-02,2025-08-09 06:01:39 UTC,237.59,-22.0,169.96
amazon_24127217761,111-4239515-6380234,Order,2025-08-02,2025-08-09 06:01:39 UTC,223.63,-20.9,177.65
amazon_24127217761,113-7405557-5161834,Order,2025-07-31,2025-08-09 06:01:39 UTC,233.19,-22.0,169.96
amazon_24127217761,111-0314567-5460202,Order,2025-07-29,2025-08-09 06:01:39 UTC,234.84,-22.0,169.96
amazon_24127217761,111-9631221-7356227,Order,2025-07-29,2025-08-09 06:01:39 UTC,238.25,-22.0,186.99
amazon_24127217761,114-1647871-5243431,Order,2025-07-28,2025-08-09 06:01:39 UTC,317.94,-26.83,250.22
amazon_24127217761,114-1977350-3225827,Order,2025-07-28,2025-08-09 06:01:39 UTC,191.77,-17.98,152.87
amazon_24127217761,114-5189750-1039435,Order,2025-07-28,2025-08-09 06:01:39 UTC,223.63,-20.9,177.65
amazon_24127217761,113-1693468-3069861,Order,2025-07-28,2025-08-09 06:01:39 UTC,283.79,-13.0,-22.03
amazon_24127217761,112-3374882-1872224,Order,2025-07-26,2025-08-09 06:01:39 UTC,238.14,-22.0,169.96
amazon_24127217761,114-3838848-3261818,Order,2025-07-25,2025-08-09 06:01:39 UTC,237.59,-22.0,186.99
amazon_24127217761,113-4840250-3077848,Order,2025-07-25,2025-08-09 06:01:39 UTC,194.69,-17.98,152.87
amazon_24127217761,112-4985604-6217844,Order,2025-07-25,2025-08-09 06:01:39 UTC,235.94,-22.0,169.96
amazon_24127217761,114-3736820-3465060,Order,2025-07-24,2025-08-09 06:01:39 UTC,152.12,-14.95,120.84
amazon_24127217761,112-8428019-1476219,Order,2025-07-24,2025-08-09 06:01:39 UTC,238.96,-22.0,186.99
amazon_24127217761,111-8523367-0959453,Order,2025-07-24,2025-08-09 06:01:39 UTC,476.28,-31.2,373.98
amazon_24028517201,113-8056449-5446666,Order,2025-07-23,2025-07-26 06:01:40 UTC,839.96,-43.2,713.96
amazon_24028517201,112-4194901-0298611,Order,2025-07-23,2025-07-26 06:01:40 UTC,445.18,-30.6,356.98
amazon_24028517201,111-3724610-5675453,Refund,2025-07-23,2025-07-26 06:01:40 UTC,0.0,0.0,-365.3
amazon_24028517201,111-0711321-6313049,Order,2025-07-23,2025-07-26 06:01:40 UTC,460.92,-30.6,356.98
amazon_24028517201,114-3510785-1537037,Refund,2025-07-23,2025-07-26 06:01:40 UTC,0.0,0.0,-246.38
amazon_24028517201,112-8942336-5038618,Refund,2025-07-22,2025-07-26 06:01:40 UTC,0.0,0.0,-315.74
amazon_24028517201,113-0133148-9400211,Order,2025-07-22,2025-07-26 06:01:40 UTC,469.12,-31.2,339.92
amazon_24028517201,114-9986413-4149006,Order,2025-07-21,2025-07-26 06:01:40 UTC,367.52,-28.2,288.98
amazon_24028517201,112-0229338-3751469,Order,2025-07-21,2025-07-26 06:01:40 UTC,466.38,-31.2,339.92
amazon_24028517201,113-7808916-6988209,Order,2025-07-21,2025-07-26 06:01:40 UTC,383.54,-28.79,305.74
amazon_24028517201,114-6002201-9814629,Order,2025-07-21,2025-07-26 06:01:40 UTC,635.88,-35.66,500.44
amazon_24028517201,111-5118892-9026607,Order,2025-07-19,2025-07-26 06:01:40 UTC,490.58,-31.2,339.92
amazon_24028517201,112-9881579-0529808,Order,2025-07-18,2025-07-26 06:01:40 UTC,481.48,-31.2,339.92
amazon_24028517201,111-8554762-1921850,Order,2025-07-18,2025-07-26 06:01:40 UTC,339.12,-27.44,267.52
amazon_24028517201,111-1987228-9292234,Order,2025-07-17,2025-07-26 06:01:40 UTC,932.76,-44.4,679.84
amazon_24028517201,114-2617438-1715456,Order,2025-07-16,2025-07-26 06:01:40 UTC,820.8,-40.75,644.52
amazon_24028517201,114-8949391-9828258,Order,2025-07-16,2025-07-26 06:01:40 UTC,470.78,-31.2,339.92`

  const payouts: Payout[] = []
  const lines = csvData.trim().split('\n')

  lines.forEach(line => {
    const parts = line.split(',')
    if (parts.length < 8) return

    const [
      ,
      orderId,
      type,
      orderDateStr,
      depositDateStr,
      potentialIncome,
      potentialLoss,
      actualProfit
    ] = parts

    // Parse date
    const orderDate = new Date(orderDateStr)

    // Determine status based on deposit date
    const hasDepositDate = depositDateStr && depositDateStr.trim() !== ''
    const today = new Date()
    let status: PayoutStatus

    if (hasDepositDate) {
      status = PayoutStatus.RECEIVED
    } else if (orderDate < today) {
      status = PayoutStatus.PROCESSING
    } else {
      status = PayoutStatus.PENDING
    }

    // Parse amounts
    const grossAmount = Math.abs(parseFloat(potentialIncome))
    const fees = Math.abs(parseFloat(potentialLoss))
    const netAmount = parseFloat(actualProfit)

    // Skip invalid entries
    if (isNaN(grossAmount) || isNaN(fees) || isNaN(netAmount)) return

    payouts.push({
      id: `amazon-${orderId}`,
      platform: Platform.AMAZON,
      grossAmount,
      fees,
      netAmount,
      date: orderDate,
      status,
      probability: status === PayoutStatus.PENDING ? 0.85 : undefined,
      transactionId: orderId,
      description: `Amazon ${type}`
    })
  })

  return payouts.sort((a, b) => a.date.getTime() - b.date.getTime())
}

const parseShopifyOrders = (): Payout[] => {
  if (!shopifyCsv) {
    return []
  }

  const lines = shopifyCsv.trim().split('\n')
  const payouts: Payout[] = []

  lines.slice(1).forEach((line, index) => {
    const trimmed = line.trim()
    if (trimmed.length === 0) return

    const parts = trimmed.split(',')
    if (parts.length < 8) return

    const [
      settlementId,
      orderId,
      type,
      orderDateStr,
      depositDateStr,
      potentialIncome,
      potentialLoss,
      actualProfit
    ] = parts

    const orderDate = new Date(orderDateStr)
    if (Number.isNaN(orderDate.getTime())) return

    const hasDepositDate = depositDateStr && depositDateStr.trim() !== ''
    const today = new Date()

    let status: PayoutStatus
    if (type === 'Refund' || hasDepositDate) {
      status = PayoutStatus.RECEIVED
    } else if (orderDate < today) {
      status = PayoutStatus.PROCESSING
    } else {
      status = PayoutStatus.PENDING
    }

    const grossAmount = Math.abs(parseFloat(potentialIncome))
    const fees = Math.abs(parseFloat(potentialLoss))
    const netAmount = parseFloat(actualProfit)

    if (Number.isNaN(grossAmount) || Number.isNaN(netAmount)) return

    payouts.push({
      id: `shopify-${orderId}-${index}`,
      platform: Platform.SHOPIFY,
      grossAmount,
      fees: Number.isNaN(fees) ? 0 : fees,
      netAmount,
      date: orderDate,
      status,
      probability: status === PayoutStatus.PENDING ? 0.85 : undefined,
      transactionId: settlementId,
      description: `Shopify ${type}`
    })
  })

  return payouts.sort((a, b) => a.date.getTime() - b.date.getTime())
}

const amazonPayouts = parseAmazonOrders()
const shopifyPayouts = parseShopifyOrders()

export const mockPayouts = [...amazonPayouts, ...shopifyPayouts].sort(
  (a, b) => a.date.getTime() - b.date.getTime()
)

export const mockExpenses: Expense[] = mockPayouts
  .filter(payout => payout.fees > 0)
  .map(payout => {
    const platformLabel =
      payout.platform === Platform.AMAZON ? 'Amazon' : 'Shopify'

    return {
      id: `${payout.platform}-fee-${payout.id}`,
      amount: payout.fees,
      date: payout.date,
      category: 'Platform Fees',
      description: `${platformLabel} fees for ${
        payout.transactionId ?? payout.id
      }`,
      platform: payout.platform
    }
  })
  .sort((a, b) => a.date.getTime() - b.date.getTime())
